(this["webpackJsonpmutual-aid-networks"]=this["webpackJsonpmutual-aid-networks"]||[]).push([[0],{238:function(e,t,a){e.exports=a(430)},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},328:function(e,t,a){},345:function(e,t,a){},380:function(e,t,a){},403:function(e,t,a){},422:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"requestNetworks",(function(){return w})),a.d(n,"setPageOfNetworks",(function(){return k}));var o={};a.r(o),a.d(o,"getSelectedCategories",(function(){return B})),a.d(o,"getSearchLocation",(function(){return G})),a.d(o,"getHoveredPointId",(function(){return F})),a.d(o,"getViewState",(function(){return H}));var r={};a.r(r),a.d(r,"getAllNetworks",(function(){return U})),a.d(r,"getFilteredNetworks",(function(){return M})),a.d(r,"getNetworksInArea",(function(){return W})),a.d(r,"getVisibleCards",(function(){return K})),a.d(r,"getBoundingBox",(function(){return q}));var s={};a.r(s),a.d(s,"setCategoryFilters",(function(){return $})),a.d(s,"setLatLng",(function(){return ee})),a.d(s,"setHoveredPoint",(function(){return te}));var i=a(21),c=a(27),l=a(35),u=a(32),p=a(36),_=a(0),E=a.n(_),d=a(134),m=a(6),A=a.n(m);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(247);var h=a(91),P=a(87),T=a(441),b=a(214),f=a.n(b),S=a(37),R=function(e,t){return"".concat(e,"-").concat(t)},O=R("EVENTS","REQUEST_NETWORKS"),g=R("EVENTS","SET_NETWORKS"),v=R("EVENTS","REQUEST_FAILED"),C=R("EVENTS","SET_PAGE_OF_NETWORKS"),I={allNetworks:[]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case g:return Object(S.a)({},e,{allNetworks:n,error:null});case C:return Object(S.a)({},e,{allNetworks:[].concat(Object(h.a)(e.allNetworks),Object(h.a)(n)),error:null});case v:return console.log("REQUEST_FAILED: ".concat(n)),Object(S.a)({},e,{error:n});default:return e}},w=function(){return{type:O}},k=function(e){return{type:C,payload:e}},D=a(67),y=a(38),j=a(173),L=a(443),B=function(e){return e.selections.categories},G=function(e){return e.selections.searchLocation},F=function(e){return e.selections.hoveredPointId},H=Object(D.a)([G],(function(e){return e.lat?"list":"default"})),x=window.mapboxgl,U=function(e){return e.networks.allNetworks},M=Object(D.a)([U,B],(function(e,t){return t.length?Object(y.filter)(e,(function(e){return t.includes(e.category)})):[]})),W=Object(D.a)([U,G],(function(e,t){if(!t.lat)return[];var a=new j.b(Number(t.lat),Number(t.lng));return e.filter((function(e){return Object(L.a)(a,new j.b(Number(e.lat),Number(e.lng)))<80467})).sort((function(e,t){return Object(L.a)(a,new j.b(Number(e.lat),Number(e.lng)))-Object(L.a)(a,new j.b(Number(t.lat),Number(t.lng)))}))})),K=Object(D.a)([M,G],(function(e,t){if(!t.lat)return[];var a=new j.b(Number(t.lat),Number(t.lng));return e.filter((function(e){return Object(L.a)(a,new j.b(Number(e.lat),Number(e.lng)))<80467})).sort((function(e,t){return Object(L.a)(a,new j.b(Number(e.lat),Number(e.lng)))-Object(L.a)(a,new j.b(Number(t.lat),Number(t.lng)))}))})),q=Object(D.a)([W],(function(e){return e.length?e.reduce((function(e,t,a){return a>0&&(e=e.extend(t)),e}),new x.LngLatBounds(e[0].bbox)):null})),z=a(440),V={actions:n,logics:[Object(z.a)({type:O,process:function(e,t,a){var n=e.httpClient;return n.get("https://firestore.googleapis.com/v1/projects/townhallproject-86312/databases/(default)/documents/mutual_aid_networks/").then((function(e){return e.body.nextPageToken?function e(o){return n.get("https://firestore.googleapis.com/v1/projects/townhallproject-86312/databases/(default)/documents/mutual_aid_networks/?pageToken=".concat(o)).then((function(n){var o=n.body.documents.map((function(e,t){var a,n=e.fields,o=Object(y.mapValues)(n,(function(e){var t=Object(y.values)(e)[0];return t.values&&(t=Object(y.map)(t.values,(function(e){return Object(y.values)(e)[0]}))),t}));return a=o.generalForm||o.supportRequestForm&&o.supportOfferForm?"General":o.supportRequestForm?"Request Support":o.supportOfferForm?"Offer Support":"Community",Object(S.a)({},o,{id:t,category:a})}));if(t(k(o)),n.body.nextPageToken)return e(n.body.nextPageToken);a()}))}(e.body.nextPageToken):a()}))}})],reducers:N,selectors:r},Y=R("SELECTIONS","FILTER_BY_CATEGORY"),J=R("SELECTIONS","SET_LAT_LNG"),X=R("SELECTIONS","SET_HOVERED_POINT"),Z=["General","Request Support","Offer Support","Community"],Q={view:"default",categories:Z,language:"",community:"",searchLocation:{},hoveredPointId:null},$=function(e){return{type:Y,payload:e}},ee=function(e){return{type:J,payload:e}},te=function(e){return{type:X,payload:e}},ae={actions:s,logics:[],reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(S.a)({},e,{categories:t.payload});case J:return Object(S.a)({},e,{searchLocation:t.payload});case X:return Object(S.a)({},e,{hoveredPointId:t.payload});default:return e}},selectors:o},ne=a(109),oe=a.n(ne),re=(a(271),a(273),"REACT_APP_PROD");var se={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TESTING_FIREBASE_API_KEY:"AIzaSyCJncx2G6bUnecl4H2VHSBTDfRRxg7H5Fs",REACT_APP_TESTING_FIREBASE_AUTH_DOMAIN:"townhalltestingsms.firebaseapp.com",REACT_APP_TESTING_DATABASE_URL:"https://townhalltestingsms.firebaseio.com",REACT_APP_TESTING_PROJECT_ID:"townhalltestingsms",REACT_APP_TESTING_STORAGE_BUCKET:"townhalltestingsms.appspot.com",REACT_APP_TESTING_MESSAGING_SENDER_ID:"86976100332",REACT_APP_PROD_FIREBASE_API_KEY:"AIzaSyCXyjAOvBKDEX5pckTwuI7LODWKNlL21gc",REACT_APP_PROD_FIREBASE_AUTH_DOMAIN:"townhallproject-86312.firebaseapp.com",REACT_APP_PROD_DATABASE_URL:"https://townhallproject-86312.firebaseio.com",REACT_APP_PROD_STORAGE_BUCKET:"townhallproject-86312.appspot.com",REACT_APP_PROD_MESSAGING_SENDER_ID:"208752196071",REACT_APP_PROD_PROJECT_ID:"townhallproject-86312",REACT_APP_MAPBOX_STYLE_URL:"mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",REACT_APP_SMS_API:"https://localhost:8080"})["".concat(re,"_FIREBASE_API_KEY")],authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TESTING_FIREBASE_API_KEY:"AIzaSyCJncx2G6bUnecl4H2VHSBTDfRRxg7H5Fs",REACT_APP_TESTING_FIREBASE_AUTH_DOMAIN:"townhalltestingsms.firebaseapp.com",REACT_APP_TESTING_DATABASE_URL:"https://townhalltestingsms.firebaseio.com",REACT_APP_TESTING_PROJECT_ID:"townhalltestingsms",REACT_APP_TESTING_STORAGE_BUCKET:"townhalltestingsms.appspot.com",REACT_APP_TESTING_MESSAGING_SENDER_ID:"86976100332",REACT_APP_PROD_FIREBASE_API_KEY:"AIzaSyCXyjAOvBKDEX5pckTwuI7LODWKNlL21gc",REACT_APP_PROD_FIREBASE_AUTH_DOMAIN:"townhallproject-86312.firebaseapp.com",REACT_APP_PROD_DATABASE_URL:"https://townhallproject-86312.firebaseio.com",REACT_APP_PROD_STORAGE_BUCKET:"townhallproject-86312.appspot.com",REACT_APP_PROD_MESSAGING_SENDER_ID:"208752196071",REACT_APP_PROD_PROJECT_ID:"townhallproject-86312",REACT_APP_MAPBOX_STYLE_URL:"mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",REACT_APP_SMS_API:"https://localhost:8080"})["".concat(re,"_FIREBASE_AUTH_DOMAIN")],databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TESTING_FIREBASE_API_KEY:"AIzaSyCJncx2G6bUnecl4H2VHSBTDfRRxg7H5Fs",REACT_APP_TESTING_FIREBASE_AUTH_DOMAIN:"townhalltestingsms.firebaseapp.com",REACT_APP_TESTING_DATABASE_URL:"https://townhalltestingsms.firebaseio.com",REACT_APP_TESTING_PROJECT_ID:"townhalltestingsms",REACT_APP_TESTING_STORAGE_BUCKET:"townhalltestingsms.appspot.com",REACT_APP_TESTING_MESSAGING_SENDER_ID:"86976100332",REACT_APP_PROD_FIREBASE_API_KEY:"AIzaSyCXyjAOvBKDEX5pckTwuI7LODWKNlL21gc",REACT_APP_PROD_FIREBASE_AUTH_DOMAIN:"townhallproject-86312.firebaseapp.com",REACT_APP_PROD_DATABASE_URL:"https://townhallproject-86312.firebaseio.com",REACT_APP_PROD_STORAGE_BUCKET:"townhallproject-86312.appspot.com",REACT_APP_PROD_MESSAGING_SENDER_ID:"208752196071",REACT_APP_PROD_PROJECT_ID:"townhallproject-86312",REACT_APP_MAPBOX_STYLE_URL:"mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",REACT_APP_SMS_API:"https://localhost:8080"})["".concat(re,"_DATABASE_URL")],storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TESTING_FIREBASE_API_KEY:"AIzaSyCJncx2G6bUnecl4H2VHSBTDfRRxg7H5Fs",REACT_APP_TESTING_FIREBASE_AUTH_DOMAIN:"townhalltestingsms.firebaseapp.com",REACT_APP_TESTING_DATABASE_URL:"https://townhalltestingsms.firebaseio.com",REACT_APP_TESTING_PROJECT_ID:"townhalltestingsms",REACT_APP_TESTING_STORAGE_BUCKET:"townhalltestingsms.appspot.com",REACT_APP_TESTING_MESSAGING_SENDER_ID:"86976100332",REACT_APP_PROD_FIREBASE_API_KEY:"AIzaSyCXyjAOvBKDEX5pckTwuI7LODWKNlL21gc",REACT_APP_PROD_FIREBASE_AUTH_DOMAIN:"townhallproject-86312.firebaseapp.com",REACT_APP_PROD_DATABASE_URL:"https://townhallproject-86312.firebaseio.com",REACT_APP_PROD_STORAGE_BUCKET:"townhallproject-86312.appspot.com",REACT_APP_PROD_MESSAGING_SENDER_ID:"208752196071",REACT_APP_PROD_PROJECT_ID:"townhallproject-86312",REACT_APP_MAPBOX_STYLE_URL:"mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",REACT_APP_SMS_API:"https://localhost:8080"})["".concat(re,"_STORAGE_BUCKET")],messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TESTING_FIREBASE_API_KEY:"AIzaSyCJncx2G6bUnecl4H2VHSBTDfRRxg7H5Fs",REACT_APP_TESTING_FIREBASE_AUTH_DOMAIN:"townhalltestingsms.firebaseapp.com",REACT_APP_TESTING_DATABASE_URL:"https://townhalltestingsms.firebaseio.com",REACT_APP_TESTING_PROJECT_ID:"townhalltestingsms",REACT_APP_TESTING_STORAGE_BUCKET:"townhalltestingsms.appspot.com",REACT_APP_TESTING_MESSAGING_SENDER_ID:"86976100332",REACT_APP_PROD_FIREBASE_API_KEY:"AIzaSyCXyjAOvBKDEX5pckTwuI7LODWKNlL21gc",REACT_APP_PROD_FIREBASE_AUTH_DOMAIN:"townhallproject-86312.firebaseapp.com",REACT_APP_PROD_DATABASE_URL:"https://townhallproject-86312.firebaseio.com",REACT_APP_PROD_STORAGE_BUCKET:"townhallproject-86312.appspot.com",REACT_APP_PROD_MESSAGING_SENDER_ID:"208752196071",REACT_APP_PROD_PROJECT_ID:"townhallproject-86312",REACT_APP_MAPBOX_STYLE_URL:"mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",REACT_APP_SMS_API:"https://localhost:8080"})["".concat(re,"_MESSAGING_SENDER_ID")],projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_TESTING_FIREBASE_API_KEY:"AIzaSyCJncx2G6bUnecl4H2VHSBTDfRRxg7H5Fs",REACT_APP_TESTING_FIREBASE_AUTH_DOMAIN:"townhalltestingsms.firebaseapp.com",REACT_APP_TESTING_DATABASE_URL:"https://townhalltestingsms.firebaseio.com",REACT_APP_TESTING_PROJECT_ID:"townhalltestingsms",REACT_APP_TESTING_STORAGE_BUCKET:"townhalltestingsms.appspot.com",REACT_APP_TESTING_MESSAGING_SENDER_ID:"86976100332",REACT_APP_PROD_FIREBASE_API_KEY:"AIzaSyCXyjAOvBKDEX5pckTwuI7LODWKNlL21gc",REACT_APP_PROD_FIREBASE_AUTH_DOMAIN:"townhallproject-86312.firebaseapp.com",REACT_APP_PROD_DATABASE_URL:"https://townhallproject-86312.firebaseio.com",REACT_APP_PROD_STORAGE_BUCKET:"townhallproject-86312.appspot.com",REACT_APP_PROD_MESSAGING_SENDER_ID:"208752196071",REACT_APP_PROD_PROJECT_ID:"townhallproject-86312",REACT_APP_MAPBOX_STYLE_URL:"mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",REACT_APP_MAPBOX_API_KEY:"pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",REACT_APP_SMS_API:"https://localhost:8080"})["".concat(re,"_PROJECT_ID")]};oe.a.initializeApp(se);var ie=oe.a.database(),ce=oe.a.firestore(),le=(oe.a,{networks:V.reducers,selections:ae.reducers}),ue=[].concat(Object(h.a)(V.logics),Object(h.a)(ae.logics)),pe={firebaseUrl:"https://townhallproject-86312.firebaseio.com",firebasedb:ie,firestore:ce,httpClient:f.a},_e=Object(T.a)(ue,pe),Ee=Object(P.a)(_e);a(289);var de=a(232),me=(a(292),a(110)),Ae=a(20),he=a(215),Pe=a.n(he),Te=function e(t){Object(i.a)(this,e);var a=Number(t.id)%2?-Number(t.id)%2*.008:Number(t.id)%2*.008,n=!Number(t.id)%2?-Number(t.id)%3*.008:Number(t.id)%3*.008;this.type="Feature",this.geometry={coordinates:[Number(t.lng+n),Number(t.lat)+a],type:"Point"};var o=t.bbox[3]-t.bbox[1];this.properties={region:t.region,contact:t.contact||null,socials:t.social||null,facebookPage:t.facebookPage,state:t.state,city:t.city,title:t.title,generalForm:t.generalForm,supportRequestForm:t.supportRequestForm,supportOfferForm:t.supportOfferForm,category:t.category,bbox:t.bbox,lat:t.lat,lng:t.lng,scale:10*o},this.id=t.id},be=a(2),fe=a.n(be),Se="networks-dots",Re="pk.eyJ1IjoidG93bmhhbGxwcm9qZWN0IiwiYSI6ImNrN3d1c3hhdDA1MmozbW80cW5oOWxzcHoifQ.rq66iVpULeHVB6PutWiunA",Oe="mapbox://styles/townhallproject/ck87rw1kt1g821is46uvwm08k",ge=window.mapboxgl,ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addClickListener=a.addClickListener.bind(Object(Ae.a)(a)),a.addLayer=a.addLayer.bind(Object(Ae.a)(a)),a.createFeatures=a.createFeatures.bind(Object(Ae.a)(a)),a.updateData=a.updateData.bind(Object(Ae.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.networks,t=this.createFeatures(e);this.initializeMap(t)}},{key:"componentDidUpdate",value:function(e){var t=e.networks;t.length!==this.props.networks.length&&this.updateData(t)}},{key:"updateData",value:function(e){var t=this.createFeatures(e);this.map.getSource("".concat(Se,"-").concat(this.props.stateName))&&this.map.getSource("".concat(Se,"-").concat(this.props.stateName)).setData(t)}},{key:"createFeatures",value:function(e){var t={features:[],type:"FeatureCollection"};return t.features=e.map((function(e){return new Te(e)})),t}},{key:"addClickListener",value:function(){var e=this.props,t=e.bounds,a=e.setBounds;this.map.on("click",(function(){a(t)}))}},{key:"addLayer",value:function(e){this.map.addLayer({id:"".concat(Se,"-").concat(this.props.stateName),paint:{"circle-opacity":.5,"circle-radius":7,"circle-stroke-color":"#fff","circle-stroke-width":1,"circle-color":["match",["get","category"],"Support Request","#ef4822","Support Offer","#6ac1e5","General","#8048f3","#057A8F"]},source:{data:e,type:"geojson"},type:"circle"},"district_interactive")}},{key:"initializeMap",value:function(e){var t=this,a=this.props,n=a.bounds,o=a.mapId;ge.accessToken=Re,this.map=new ge.Map({container:o,doubleClickZoom:!1,dragPan:!1,scrollZoom:!1,style:Oe}),this.map.fitBounds(n,{easeTo:{duration:0},linear:!0}),this.map.on("load",(function(){t.addClickListener(),t.addLayer(e)}))}},{key:"render",value:function(){var e=this.props,t=e.viewState,a=e.mapId,n=fe()({hidden:"list"===t,inset:!0});return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{id:a,className:n,"data-bounds":this.props.bounds}))}}]),t}(E.a.Component);ve.defaultProps={selectedState:""};var Ce=ve,Ie=(a(323),a(324),a(325),a(326),window.mapboxgl),Ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).filterDistrict=["any"],a.includedStates=["in","NAME"],a.addPopups=a.addPopups.bind(Object(Ae.a)(a)),a.addClickListener=a.addClickListener.bind(Object(Ae.a)(a)),a.addLayer=a.addLayer.bind(Object(Ae.a)(a)),a.createFeatures=a.createFeatures.bind(Object(Ae.a)(a)),a.updateData=a.updateData.bind(Object(Ae.a)(a)),a.handleReset=a.handleReset.bind(Object(Ae.a)(a)),a.insetOnClickEvent=a.insetOnClickEvent.bind(Object(Ae.a)(a)),a.handleClickOnInset=a.handleClickOnInset.bind(Object(Ae.a)(a)),a.initializeMap=a.initializeMap.bind(Object(Ae.a)(a)),a.state={popoverColor:"popover-general-icon",bbox:null},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.networks,t=this.createFeatures(e);this.initializeMap(t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.hoveredPointId,n=t.viewState,o=t.bbox,r=t.networks;this.map.resize(),r.length!==e.networks.length&&this.updateData(this.props.networks),e.viewState!==n&&(this.hoveredPopup.remove(),"default"===n&&this.setInitialState()),this.state.bbox&&"list"===n&&(this.fitBounds(this.state.bbox),this.setState({bbox:null})),o&&"list"===n&&o!==e.bbox&&this.fitBounds(o),a&&this.hoverPoint(a),e.hoveredPointId&&e.hoveredPointId!==a&&this.unHoverPoint(e.hoveredPointId)}},{key:"insetOnClickEvent",value:function(e){this.setState({inset:!1});var t=e.target.parentNode.parentNode.getAttribute("data-bounds").split(","),a=[Number(t[0]),Number(t[1])],n=[Number(t[2]),Number(t[3])],o=a.concat(n);this.fitBounds(o)}},{key:"fitBounds",value:function(e){this.map.fitBounds(e,{padding:{top:10,bottom:25,left:15,right:5},maxZoom:8})}},{key:"updateData",value:function(e){var t=this.createFeatures(e);this.map.getSource(Se)&&this.map.getSource(Se).setData(t)}},{key:"createFeatures",value:function(e){var t={features:[],type:"FeatureCollection"};return t.features=e.map((function(e){return new Te(e)})),t}},{key:"addPopups",value:function(e){var t=this,a=this.map;this.hoveredPopup=new Ie.Popup({closeButton:!0,closeOnClick:!0}),a.on("mousemove",(function(n){var o=a.queryRenderedFeatures(n.point,{layers:[e]});if(a.getCanvas().style.cursor=o.length?"pointer":"",o.length){var r,s=o[0],i=s.properties,c="popover-".concat(s.properties.category.split(" ").join("-").toLowerCase());return t.setState({popoverColor:c}),t.props.setHoveredPoint(o[0].id),r=i.generalForm?'<a rel="noopener noreferrer" target="_blank" href='.concat(i.generalForm,">Link to form</a>"):i.supportOfferForm&&i.supportRequestForm?'<a rel="noopener noreferrer" class="side-by-side" target="_blank" href='.concat(i.supportOfferForm,'>Offer support</a><a class="side-by-side" target="_blank" href=').concat(i.supportRequestForm,">Request support</a>"):i.supportOfferForm?'<a rel="noopener noreferrer" href='.concat(i.supportOfferForm,">Offer support</a>"):i.supportRequestForm?'<a rel="noopener noreferrer" href='.concat(i.supportRequestForm,">Request support</a>"):'<a rel="noopener noreferrer" href='.concat(i.facebookPage,">Link to group</a>"),t.hoveredPopup.setLngLat(s.geometry.coordinates).setHTML("\n            <h4>".concat(i.title,"</h4>\n            <div>").concat(i.city,", ").concat(i.state,"</div>\n            <div>").concat(r,"</div>")).addTo(a)}}))}},{key:"addClickListener",value:function(){var e=this.map,t=this.props.setLatLng;e.on("click",(function(a){var n=e.queryRenderedFeatures(a.point,{layers:[Se]});n.length>0&&t({lat:n[0].properties.lat,lng:n[0].properties.lng})}))}},{key:"hoverPoint",value:function(e){this.map.setFeatureState({source:Se,id:e},{hover:!0})}},{key:"unHoverPoint",value:function(e){this.map.setFeatureState({source:Se,id:e},{hover:!1})}},{key:"addLayer",value:function(e){this.map.addLayer({id:Se,paint:{"circle-opacity":["case",["boolean",["feature-state","hover"],!1],1,.5],"circle-radius":8,"circle-stroke-color":"#fff","circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],2,1],"circle-color":["match",["get","category"],"Request Support","#ef4822","Offer Support","#6ac1e5","General","#8048f3","#057A8F"]},source:{data:e,type:"geojson"},type:"circle"},"district_interactive")}},{key:"handleReset",value:function(){(0,this.props.setLatLng)({})}},{key:"setInitialState",value:function(){this.fitBounds([[-128.8,23.6],[-65.4,50.2]]),document.getElementsByClassName("mapboxgl-ctrl-geocoder--input"),Array.from(document.getElementsByClassName("mapboxgl-ctrl-geocoder--input")).forEach((function(e){e.value=""})),this.map.resize()}},{key:"handleClickOnInset",value:function(e){this.setState({bbox:e});var t=new Ie.LngLatBounds(e).getCenter();this.props.setLatLng(t)}},{key:"makeZoomToNationalButton",value:function(){document.querySelector(".mapboxgl-ctrl-compass").remove(),document.querySelector(".mapboxgl-ctrl-usa")&&document.querySelector(".mapboxgl-ctrl-usa").remove();var e=document.createElement("button");e.className="mapboxgl-ctrl-icon mapboxgl-ctrl-usa",e.innerHTML='<span class="usa-icon"></span>',e.addEventListener("click",this.handleReset),document.querySelector(".mapboxgl-ctrl-group").appendChild(e)}},{key:"initializeMap",value:function(e){var t=this,a=this.props.setLatLng;Ie.accessToken=Re,this.map=new Ie.Map({container:"map",style:Oe}),this.map.addControl(new Ie.NavigationControl),this.map.scrollZoom.disable(),this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation(),this.makeZoomToNationalButton();var n=this.map;this.map.addControl(new Pe.a({accessToken:Ie.accessToken,mapboxgl:Ie,countries:"us",marker:!1,zoom:12,flyTo:!1}).on("clear",(function(e){a({})})).on("result",(function(e){n.resize(),a({lat:e.result.center[1],lng:e.result.center[0]})})),"top-left"),this.map.on("load",(function(){t.fitBounds([[-128.8,23.6],[-65.4,50.2]]),t.addClickListener(),t.addLayer(e),t.addPopups(Se)}))}},{key:"render",value:function(){var e=this.props,t=e.center,a=e.resetSelections,n=e.setLatLng,o=e.viewState,r=e.networks;return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{id:"map",className:this.state.popoverColor},E.a.createElement("div",{className:"map-overlay",id:"legend"},E.a.createElement(Ce,{networks:Object(y.filter)(r,{state:"AK"}),center:t,stateName:"AK",viewState:o,resetSelections:a,setLatLng:n,setBounds:this.handleClickOnInset,mapId:"map-overlay-alaska",bounds:[[-170.15625,51.72702815704774],[-127.61718749999999,71.85622888185527]]}),E.a.createElement(Ce,{networks:Object(y.filter)(r,{state:"HI"}),stateName:"HI",center:t,viewState:o,resetSelections:a,setLatLng:n,setBounds:this.handleClickOnInset,mapId:"map-overlay-hawaii",bounds:[[-161.03759765625,18.542116654448996],[-154.22607421875,22.573438264572406]]}))))}}]),t}(E.a.Component);Ne.defaultProps={};var we=Ne,ke=(a(192),a(235)),De=(a(328),function(){return E.a.createElement("div",{className:"start-network-container"},E.a.createElement(ke.a,{id:"start-network-button",target:"_blank",href:"https://docs.google.com/forms/d/e/1FAIpQLScuqQtCdKsDzvTzaA2PMyVHX7xcOqbOW7N7l_0YJASV4wMBVQ/viewform"},"Submit a Mutual Aid Network"))}),ye=(a(343),a(140)),je=(a(345),ye.a.Group),Le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={indeterminate:!1,checkAll:!0},a.onChange=function(e){a.props.setFilters(e),a.setState({indeterminate:!!e.length&&e.length<Z.length,checkAll:e.length===Z.length})},a.onCheckAllChange=function(e){var t=e.target.checked?Z:[];a.setState({indeterminate:!1,checkAll:e.target.checked}),a.props.setFilters(t)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.visible?E.a.createElement("div",{className:fe()("filter-container",{"absolute-pos":this.props.absolute})},E.a.createElement("div",{className:"site-checkbox-all-wrapper"},E.a.createElement(ye.a,{indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},"Select all")),E.a.createElement("br",null),E.a.createElement(je,{value:this.props.selectedCategories,onChange:this.onChange},Z.map((function(e){return E.a.createElement(ye.a,{key:e.replace(" ","-").toLowerCase(),className:e.replace(" ","-").toLowerCase(),value:e},e)})))):null}}]),t}(E.a.Component),Be=(a(432),a(234)),Ge=a(442),Fe=(a(431),a(233)),He=(a(206),a(54)),xe=(a(380),function(e){return E.a.createElement(E.a.Fragment,null,e.networks.map((function(t){var a=t.address,n=t.title,o=t.neighborhood,r=t.facebookPage,s=t.category,i=t.community,c=t.language,l=t.generalForm,u=t.supportRequestForm,p=t.supportOfferForm,_=t.id;return E.a.createElement(Fe.a,{className:"network-card",title:n,key:_,onMouseEnter:function(){return e.setHoveredPoint(_)},onMouseLeave:function(){return e.setHoveredPoint(null)},extra:E.a.createElement("ul",{className:"list-inline"},s&&E.a.createElement("li",{className:"text-".concat(s.split(" ").join("-").toLowerCase())},s),i&&E.a.createElement("li",null,i))},E.a.createElement("ul",{className:"list-inline"},o&&E.a.createElement("li",null,o),a&&E.a.createElement("li",null,a),c&&E.a.createElement("li",null,c)),E.a.createElement(He.a,{justify:"space-between"},l&&E.a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"button"},"Offer or request help"),u&&E.a.createElement("a",{href:u,rel:"noopener noreferrer",target:"_blank",className:"button"},"Request help"),p&&E.a.createElement("a",{href:p,rel:"noopener noreferrer",target:"_blank",className:"button"},"Offer help"),r&&E.a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank",className:"button"},"Join social media")))})))}),Ue=(a(403),Be.a.Title),Me=function(){return E.a.createElement("div",{className:"no-network-section"},E.a.createElement(Ue,{level:3},E.a.createElement(Ge.a,null)),E.a.createElement(Ue,{level:3},"There are no support requests or networks nearby."))},We=function(e){var t=e.visibleCards,a=e.setHoveredPoint,n=e.setFilters,o=e.selectedCategories;return E.a.createElement("div",{className:"list-container"},t.length?E.a.createElement(E.a.Fragment,null,E.a.createElement(Le,{setFilters:n,absolute:!1,selectedCategories:o,visible:!0}),E.a.createElement(xe,{setHoveredPoint:a,networks:t})):E.a.createElement(Me,null))},Ke=(a(422),function(){return E.a.createElement("div",{class:"webGl-warning",target:"_blank"},E.a.createElement("p",null,"Our interactive map feature uses WebGL, a plugin common in most modern browsers. Your browser does not have WebGL working currently."),E.a.createElement("p",null,"You can learn how to enable WebGL on",E.a.createElement("a",{rel:"noopener noreferrer",href:"https://get.webgl.org/",target:"_blank"}," this website.")))}),qe=me.a.Header,ze=me.a.Content,Ve=me.a.Footer,Ye=window.mapboxgl,Je=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.requestNetworks)()}},{key:"render",value:function(){var e=this.props,t=e.setFilters,a=e.selectedCategories,n=e.filteredNetworks,o=e.viewState,r=e.setLatLng,s=e.visibleCards,i=e.allNetworks,c=e.setHoveredPoint,l=e.hoveredPointId,u=e.masterBbox;return i.length?E.a.createElement(me.a,{className:"layout"},E.a.createElement(qe,null,E.a.createElement("div",{className:"logo"}),E.a.createElement(de.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}})),E.a.createElement(ze,{style:{padding:"0 50px"}},E.a.createElement("div",{className:"main-container"},Ye.supported()?E.a.createElement(E.a.Fragment,null,E.a.createElement(Le,{setFilters:t,selectedCategories:a,absolute:!0,visible:"default"===o}),E.a.createElement("div",{className:"interactive-content-".concat(o)},E.a.createElement(we,{networks:n,viewState:o,setLatLng:r,hoveredPointId:l,setHoveredPoint:c,bbox:u}),E.a.createElement(We,{visibleCards:s,setHoveredPoint:c,setFilters:t,selectedCategories:a}))):E.a.createElement(Ke,null),E.a.createElement("div",{className:"tagline"},"Find Mutual Aid Networks and other community self-support projects near you. Reach out to these groups directly via the map above to get involved, offer resources, or submit needs requests."),E.a.createElement(De,null))),E.a.createElement(Ve,{style:{textAlign:"center"}},E.a.createElement("div",{className:"footer-text"},"We list these networks as a public resource. We cannot verify or vouch for any network or individual offerings. Please exercise all necessary judgement when interacting with community members not previously known to you."))):null}}]),t}(E.a.Component),Xe=Object(d.b)((function(e){return{filteredNetworks:V.selectors.getFilteredNetworks(e),selectedCategories:ae.selectors.getSelectedCategories(e),viewState:ae.selectors.getViewState(e),searchLocation:ae.selectors.getSearchLocation(e),visibleCards:V.selectors.getVisibleCards(e),allNetworks:V.selectors.getAllNetworks(e),hoveredPointId:ae.selectors.getHoveredPointId(e),masterBbox:V.selectors.getBoundingBox(e)}}),(function(e){return{requestNetworks:function(){return e(V.actions.requestNetworks())},setFilters:function(t){return e(ae.actions.setCategoryFilters(t))},setLatLng:function(t){return e(ae.actions.setLatLng(t))},setHoveredPoint:function(t){return e(ae.actions.setHoveredPoint(t))}}}))(Je),Ze=(a(429),Object(P.d)(Object(P.c)(le),Ee)),Qe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return E.a.createElement(d.a,{store:Ze},E.a.createElement(Xe,null))}}]),t}(_.Component);A.a.render(E.a.createElement(Qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.54835882.chunk.js.map